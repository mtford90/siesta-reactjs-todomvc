var SiestaMixin={componentWillMount:function(){this.listeners=[]},_cancelListeners:function(){for(var i=0;i<this.listeners.length;i++){var n=this.listeners[i];n()}this.listeners=[]},componentWillUnmount:function(){this._cancelListeners()},_listenToModel:function(i,n,t){var e;if(!n.singleton)throw new Error("Cannot listen to a Model if it is not a singleton");return n.one().execute(function(n,s){n?t(n):(e=this[i](s,function(i){t(s,i)}),this.listeners.push(e))}.bind(this)),function(){if(e){var i=this.listeners.indexOf(e);this.listeners.splice(i,1),e()}}.bind(this)},wrapCancelListen:function(i){var n;return"function"==typeof i&&(n=function(){var n=this.listeners.indexOf(i);this.listeners.splice(n,1),i()}.bind(this)),n},listen:function(i,n){var t;return t=i instanceof siesta._internal.Model?this._listenToModel("listen",i,n):i.listen(n),t&&this.listeners.push(t),this.wrapCancelListen(t)}};"undefined"!=typeof module&&(module.exports={SiestaMixin:SiestaMixin}),"undefined"!=typeof window&&(window.SiestaMixin=SiestaMixin);